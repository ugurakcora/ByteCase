{% style %}
@keyframes ping {
  75%, 100% {
    transform: scale(2);
    opacity: 0;
  }
}

@keyframes pulse {
  50% {
    opacity: 0.5;
  }
}
{% endstyle %}

<div class="min-h-screen bg-gradient-to-br from-cyan-400 to-blue-500 flex items-center justify-center p-4">
  <div class="relative max-w-4xl w-full">
    {{ section.settings.room_image | image_url: width: 1000 | image_tag: 
      class: 'w-full h-auto rounded-2xl shadow-xl',
      alt: section.settings.room_image.alt | escape
    }}
    
    {% for block in section.blocks %}
      {% if block.type == 'hotspot' %}
        <div class="absolute cursor-pointer group" 
          style="left: {{ block.settings.x_position }}%; top: {{ block.settings.y_position }}%;"
          {{ block.shopify_attributes }}>
          <div class="w-6 h-6 bg-yellow-400 rounded-full relative">
            <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-yellow-400 opacity-75"></span>
            <span class="animate-pulse absolute -inset-1 rounded-full bg-yellow-300 opacity-75"></span>
          </div>
          <div class="hidden group-hover:block absolute bg-white p-4 rounded-lg shadow-lg -translate-x-1/2 -translate-y-full -top-4 left-1/2 w-[13rem] z-10">
            {{ block.settings.product.featured_image | image_url: width: 400 | image_tag: 
              class: 'w-full h-32 object-fill rounded-lg mb-3',
              alt: block.settings.product.featured_image.alt | escape
            }}
            <h3 class="text-lg font-semibold text-gray-800"></h3>{{ block.settings.product.title }}</h3>
            <p class="text-gray-600 my-2">{{ block.settings.product.price | money }}</p>
            <div class="flex gap-2">
              <form method="post" action="/cart/add">
                <input type="hidden" name="id" value="{{ block.settings.product.first_available_variant.id }}" />
                <button type="submit" class="bg-yellow-400 text-black px-4 py-2 rounded hover:bg-yellow-500 transition-colors text-center h-[60px]">
                  {{ 'products.product.add_to_cart' | t }}
                </button>
              </form>
              <a href="{{ block.settings.product.url }}" class="bg-gray-100 text-gray-800 px-4 py-2 rounded hover:bg-gray-200 transition-colors text-center h-[60px]">
                {{ 'products.product.view_details' | t }}
              </a>
            </div>
            <div class="absolute -bottom-2 left-1/2 w-4 h-4 bg-white transform rotate-45 -translate-x-1/2"></div>
          </div>
        </div>
      {% endif %}
    {% endfor %}
  </div>
</div>

{% schema %}
{
  "name": "Hover Product",
  "settings": [
    {
      "type": "image_picker",
      "id": "room_image",
      "label": "Room Image"
    }
  ],
  "blocks": [
    {
      "type": "hotspot",
      "name": "Product Hotspot",
      "settings": [
        {
          "type": "product",
          "id": "product",
          "label": "Product"
        },
        {
          "type": "range",
          "id": "x_position",
          "min": 0,
          "max": 100,
          "step": 1,
          "unit": "%",
          "label": "X Position",
          "default": 50
        },
        {
          "type": "range",
          "id": "y_position",
          "min": 0,
          "max": 100,
          "step": 1,
          "unit": "%",
          "label": "Y Position",
          "default": 50
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Hover Product",
      "category": "Interactive"
    }
  ]
}
{% endschema %}